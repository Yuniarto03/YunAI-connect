
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lovable AI Data Analyst</title>
  <script src="https://cdn.tailwindcss.com"></script>
  
  <script>
    // Ensure process.env and API_KEY handling aligns with hosting best practices.
    // The application relies on the hosting environment to set process.env.API_KEY.
    if (typeof window.process === 'undefined') {
      window.process = {};
    }
    if (typeof window.process.env === 'undefined') {
      window.process.env = {};
    }
    // DO NOT set a placeholder for API_KEY here for hosted environments.
    // The AppContext will check for process.env.API_KEY. If it's not provided
    // by the hosting environment, the app will display the "API Key Required" message.
    if (typeof window.process.env.API_KEY === 'undefined' || window.process.env.API_KEY === null || window.process.env.API_KEY === '') {
      console.warn(
        "Gemini API_KEY is not set in the environment (window.process.env.API_KEY). " +
        "The application requires this to be provided by the hosting environment to function correctly. " +
        "The 'API Key Required' message will be displayed."
      );
    }
    
    // Tailwind Custom Configuration
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'neon-blue': '#00D4FF',
            'cyber-purple': '#8B5CF6',
            'matrix-green': '#00FF88',
            'tech-orange': '#FF6B35',
            'dark-bg': '#0A0F1E',
            'light-text': '#E0E0E0',
            'medium-gray': '#333F58',
            'dark-gray': '#1E293B',
            'glass-edge': 'rgba(255, 255, 255, 0.1)',
            'glass-surface': 'rgba(255, 255, 255, 0.05)',
            // Standard Tailwind colors used in themes, if not default
            'green-400': '#4ade80',
            'lime-500': '#84cc16',
            'emerald-500': '#10b981',
            'slate-800': '#1e293b',
            'slate-900': '#0f172a',
            'slate-950': '#020617',
            'slate-100': '#f1f5f9',
            'slate-700': '#334155',
            'amber-500': '#f59e0b',
            'red-500': '#ef4444',
            'indigo-900': '#312e81',
            'indigo-100': '#e0e7ff',
            'indigo-700': '#4338ca',
            'violet-500': '#8b5cf6',
            'pink-500': '#ec4899',
            'sky-900': '#0c4a6e',
            'blue-950': '#172554',
            'cyan-400': '#22d3ee',
            'teal-400': '#2dd4bf',
            'sky-100': '#e0f2fe',
            'sky-700': '#0369a1'
          },
          boxShadow: {
            'neon-glow-neon-blue': '0 0 5px #00D4FF, 0 0 10px #00D4FF, 0 0 15px #00D4FF',
            'neon-glow-cyber-purple': '0 0 5px #8B5CF6, 0 0 10px #8B5CF6, 0 0 15px #8B5CF6',
            'neon-glow-matrix-green': '0 0 5px #00FF88, 0 0 10px #00FF88, 0 0 15px #00FF88',
            'neon-glow-tech-orange': '0 0 5px #FF6B35, 0 0 10px #FF6B35, 0 0 15px #FF6B35',
            'emboss': 'inset 2px 2px 5px rgba(0,0,0,0.5), inset -2px -2px 5px rgba(255,255,255,0.2)',
            'emboss-dark': 'inset 3px 3px 6px #05070c, inset -3px -3px 6px #1f2b40',
            'lifted-3d-neon-blue': '0px 10px 20px -5px rgba(0, 212, 255, 0.3), 0px 5px 10px -3px rgba(0, 212, 255, 0.2), 0 0 30px 5px rgba(0, 212, 255, 0.15)',
            'lifted-3d-cyber-purple': '0px 10px 20px -5px rgba(139, 92, 246, 0.3), 0px 5px 10px -3px rgba(139, 92, 246, 0.2), 0 0 30px 5px rgba(139, 92, 246, 0.15)',
            'lifted-3d-matrix-green': '0px 10px 20px -5px rgba(0, 255, 136, 0.3), 0px 5px 10px -3px rgba(0, 255, 136, 0.2), 0 0 30px 5px rgba(0, 255, 136, 0.15)',
            'lifted-3d-tech-orange': '0px 10px 20px -5px rgba(255, 107, 53, 0.3), 0px 5px 10px -3px rgba(255, 107, 53, 0.2), 0 0 30px 5px rgba(255, 107, 53, 0.15)',
          },
          animation: {
            'pulse-fast': 'pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            'slide-in': 'slideIn 0.5s ease-out forwards',
            'fade-in': 'fadeIn 0.5s ease-out forwards',
            'dock-item-float': 'dockItemFloat 6s ease-in-out infinite alternate',
            'report-title-glow-animation': 'reportTitleGlow 3s ease-in-out infinite alternate',
            'page-exit-animation': 'pageExit 0.7s ease-in-out forwards',
            'page-enter-animation': 'pageEnter 0.7s ease-in-out forwards',
            'grid-exit-animation': 'gridShowAndFade 0.7s ease-in-out forwards',
            'grid-enter-animation': 'gridFadeInAndHide 0.7s ease-in-out forwards',
          },
          keyframes: {
            pulse: { // Ensure 'pulse' keyframe is defined if 'pulse-fast' uses it
              '0%, 100%': { opacity: 1 },
              '50%': { opacity: .5 },
            },
            slideIn: {
              '0%': { transform: 'translateX(-100%)', opacity: '0' },
              '100%': { transform: 'translateX(0)', opacity: '1' },
            },
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' },
            },
            dockItemFloat: {
              '0%': { transform: 'translateY(0px)' },
              '50%': { transform: 'translateY(-3px)' },
              '100%': { transform: 'translateY(0px)' },
            },
            reportTitleGlow: {
              '0%, 100%': { textShadow: '0 0 5px var(--glow-color-1, #00D4FF), 0 0 10px var(--glow-color-1, #00D4FF), 0 0 15px var(--glow-color-1, #00D4FF), 0 0 20px var(--glow-color-2, #8B5CF6), 0 0 30px var(--glow-color-2, #8B5CF6)' },
              '50%': { textShadow: '0 0 10px var(--glow-color-1, #00D4FF), 0 0 20px var(--glow-color-1, #00D4FF), 0 0 30px var(--glow-color-1, #00D4FF), 0 0 40px var(--glow-color-2, #8B5CF6), 0 0 50px var(--glow-color-2, #8B5CF6), 0 0 70px var(--glow-color-2, #8B5CF6)' },
            },
            pageExit: {
              '0%': { opacity: '1', transform: 'scale(1) perspective(500px) rotateX(0deg)' },
              '100%': { opacity: '0', transform: 'scale(0.95) perspective(500px) rotateX(15deg)' },
            },
            pageEnter: {
              '0%': { opacity: '0', transform: 'scale(0.95) perspective(500px) rotateX(-15deg)' },
              '100%': { opacity: '1', transform: 'scale(1) perspective(0px) rotateX(0deg)' },
            },
            gridShowAndFade: { /* For page exit */
              '0%': { opacity: '0', backgroundSize: 'calc(var(--grid-cell-size, 50px) * 2) calc(var(--grid-cell-size, 50px) * 2)' },
              '50%': { opacity: '0.3', backgroundSize: 'var(--grid-cell-size, 50px) var(--grid-cell-size, 50px)' },
              '100%': { opacity: '0', backgroundSize: 'calc(var(--grid-cell-size, 50px) * 0.5) calc(var(--grid-cell-size, 50px) * 0.5)' },
            },
            gridFadeInAndHide: { /* For page enter */
              '0%': { opacity: '0.3', backgroundSize: 'calc(var(--grid-cell-size, 50px) * 0.5) calc(var(--grid-cell-size, 50px) * 0.5)' },
              '50%': { opacity: '0.15', backgroundSize: 'var(--grid-cell-size, 50px) var(--grid-cell-size, 50px)' },
              '100%': { opacity: '0', backgroundSize: 'calc(var(--grid-cell-size, 50px) * 2) calc(var(--grid-cell-size, 50px) * 2)' },
            },
            simpleFadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
            simpleFadeOut: { '0%': { opacity: '1' }, '100%': { opacity: '0' } },
          }
        },
      },
      plugins: [],
    }
  </script>
  <style>
    :root {
      --futuristic-scrollbar-thumb: #8B5CF6; /* Default: cyber-purple */
      --futuristic-scrollbar-thumb-hover: #00D4FF; /* Default: neon-blue */
      --futuristic-scrollbar-track: #1E293B; /* Default: dark-gray */
      --dock-height: 60px; /* Reduced from 70px */

      /* Variables for report title glow */
      --glow-color-1: #00D4FF; /* Default neon-blue */
      --glow-color-2: #8B5CF6; /* Default cyber-purple */

      /* For Page Transition Grid Overlay */
      --grid-color: #00D4FF; /* Default grid color, will be overridden by JS */
      --grid-line-thickness: 1px;
      --grid-cell-size: 50px;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      perspective: 1200px; /* Added for global 3D perspective */
    }
    .futuristic-scrollbar::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    .futuristic-scrollbar::-webkit-scrollbar-track {
      background: var(--futuristic-scrollbar-track);
      border-radius: 10px;
    }
    .futuristic-scrollbar::-webkit-scrollbar-thumb {
      background: var(--futuristic-scrollbar-thumb);
      border-radius: 10px;
    }
    .futuristic-scrollbar::-webkit-scrollbar-thumb:hover {
      background: var(--futuristic-scrollbar-thumb-hover);
    }
    .recharts-default-tooltip {
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
    }
    
    /* Page Transition Styles */
    #main-content-area.page-exit-active {
      animation: pageExit 0.7s ease-in-out forwards;
    }
    #main-content-area.page-enter-active {
      animation: pageEnter 0.7s ease-in-out forwards;
    }

    .page-transition-grid-overlay {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      pointer-events: none;
      z-index: 5; /* Adjust as needed */
      opacity: 0;
      background-image:
        linear-gradient(to right, var(--grid-color) var(--grid-line-thickness), transparent var(--grid-line-thickness)),
        linear-gradient(to bottom, var(--grid-color) var(--grid-line-thickness), transparent var(--grid-line-thickness));
      /* animation-timing-function: steps(1, end); */ /* Removed this to allow smooth background-size transition */
    }
    .page-transition-grid-overlay.grid-exit-active {
      animation: gridShowAndFade 0.7s ease-in-out forwards;
    }
    .page-transition-grid-overlay.grid-enter-active {
      animation: gridFadeInAndHide 0.7s ease-in-out forwards;
    }

    /* 3D Card Interactive Styles */
    .card-3d-interactive {
      transform-style: preserve-3d;
      transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    .card-3d-interactive:hover {
      /* Default hover, specific themes might override shadow */
      transform: perspective(800px) rotateY(5deg) rotateX(2deg) translateZ(30px) scale(1.03);
      /* Default shadow to be overridden by Tailwind utilities if possible, or use CSS variables here */
    }
    /* Use Tailwind for dynamic shadows in the component if possible, otherwise, use CSS variables here */
    /* Example of how to use variables (if Tailwind classes are insufficient for dynamic accent shadows) */
    /* .card-3d-interactive:hover { box-shadow: var(--dynamic-3d-shadow, 0 20px 30px -10px rgba(0,0,0,0.3)); } */


    /* Reduce Motion Styles */
    body.no-motion .animate-pulse-fast,
    body.no-motion .animate-slide-in,
    body.no-motion .animate-fade-in,
    body.no-motion .animate-dock-item-float,
    body.no-motion .animate-report-title-glow-animation {
      animation: none !important;
    }
    body.no-motion * {
      transition-property: none !important;
    }
    body.no-motion .transition-all,
    body.no-motion .transition,
    body.no-motion .transition-transform,
    body.no-motion .transition-opacity,
    body.no-motion .transition-colors {
        transition-duration: 0ms !important;
        transition-delay: 0ms !important;
    }
    .report-title-glow {
        animation: reportTitleGlow 3s ease-in-out infinite alternate;
    }
    body.no-motion .report-title-glow {
        animation: none;
        text-shadow: 0 0 5px var(--glow-color-1, #00D4FF), 0 0 10px var(--glow-color-1, #00D4FF), 0 0 20px var(--glow-color-2, #8B5CF6); /* Static glow for no-motion */
    }

    body.no-motion #main-content-area.page-exit-active { animation: simpleFadeOut 0.3s ease-in-out forwards !important; }
    body.no-motion #main-content-area.page-enter-active { animation: simpleFadeIn 0.3s ease-in-out forwards !important; }
    body.no-motion .page-transition-grid-overlay.grid-exit-active,
    body.no-motion .page-transition-grid-overlay.grid-enter-active {
      animation: none !important; /* No grid animation, just ensure it's hidden */
      opacity: 0 !important;
    }

    /* Disable 3D card hover for reduced motion */
    body.no-motion .card-3d-interactive:hover {
      transform: none;
      /* Keep a simpler box-shadow if desired, or remove it entirely for no-motion */
      /* box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06); */
    }
    /* Ensure Dock item's 3D hover is also disabled or simplified if necessary */
    /* Dock.tsx uses inline styles for transform, so it will check reduceMotion prop directly */
    
  </style>
<script type="importmap">
{
  "imports": {
    "@google/genai": "https://esm.sh/@google/genai@^1.4.0",
    "react-dom/": "https://esm.sh/react-dom@^19.1.0/",
    "react-router-dom": "https://esm.sh/react-router-dom@^7.6.2",
    "react/": "https://esm.sh/react@^19.1.0/",
    "react": "https://esm.sh/react@^19.1.0",
    "lucide-react": "https://esm.sh/lucide-react@^0.514.0",
    "react-markdown": "https://esm.sh/react-markdown@^10.1.0",
    "recharts/": "https://esm.sh/recharts@^2.15.3/",
    "recharts": "https://esm.sh/recharts@^2.15.3",
    "remark-gfm": "https://esm.sh/remark-gfm@^4.0.1",
    "hast": "https://esm.sh/hast@^1.0.0",
    "xlsx": "https://esm.sh/xlsx@^0.18.5",
    "react-dropzone": "https://esm.sh/react-dropzone@^14.3.8",
    "jspdf": "https://esm.sh/jspdf@^2.5.1",
    "pptxgenjs": "https://esm.sh/pptxgenjs@^3.12.0",
    "marked": "https://esm.sh/marked@^5.0.0",
    "leaflet": "https://esm.sh/leaflet@^1.9.4" 
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="root"></div>
  <script type="module" src="/index.tsx"></script>
  
</body>
</html>